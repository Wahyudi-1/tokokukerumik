<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- TAG ANTI-CACHE KETAT -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <title>Sistem Manajemen Barang & Kasir</title>

    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js (CDN) untuk Dashboard -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-100 font-sans text-gray-800 antialiased min-h-screen flex flex-col">

    <!-- Navbar -->
    <nav class="bg-white shadow-md no-print sticky top-0 z-10">
        <div class="max-w-4xl mx-auto px-4">
            <div class="flex space-x-2 overflow-x-auto py-3">
                <button onclick="switchTab('page-input')" id="tab-input" class="tab-btn px-4 py-2 rounded-md font-semibold text-blue-600 bg-blue-50 hover:bg-blue-100 transition whitespace-nowrap">1. Input Barang</button>
                <button onclick="switchTab('page-transaksi')" id="tab-transaksi" class="tab-btn px-4 py-2 rounded-md font-semibold text-gray-600 hover:bg-gray-100 transition whitespace-nowrap">2. Transaksi</button>
                <button onclick="switchTab('page-pesanan')" id="tab-pesanan" class="tab-btn px-4 py-2 rounded-md font-semibold text-gray-600 hover:bg-gray-100 transition whitespace-nowrap">3. Data Pesanan</button>
                <button onclick="switchTab('page-dashboard')" id="tab-dashboard" class="tab-btn px-4 py-2 rounded-md font-semibold text-gray-600 hover:bg-gray-100 transition whitespace-nowrap">4. Dashboard</button>
            </div>
        </div>
    </nav>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-white/80 z-50 flex flex-col items-center justify-center hidden">
        <svg class="animate-spin h-10 w-10 text-blue-600 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        <p class="text-gray-600 font-medium animate-pulse" id="loading-text">Memuat Data...</p>
    </div>

    <!-- Main Content -->
    <main class="flex-grow max-w-4xl mx-auto w-full px-2 py-4 sm:p-4">
        
        <!-- HALAMAN 1: INPUT BARANG -->
        <section id="page-input" class="page-section space-y-6">
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                    <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg>
                    Input Data Barang
                </h2>
                <form id="form-barang" onsubmit="submitBarang(event)" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Jenis Barang</label>
                        <input type="text" id="input-jenis" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition" placeholder="Contoh: Baju, Celana, Sepatu">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Nama Barang</label>
                        <input type="text" id="input-nama" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition" placeholder="Contoh: Kaos Polos Hitam">
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Harga (Rp)</label>
                            <input type="number" inputmode="numeric" id="input-harga" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition" placeholder="0">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Ukuran</label>
                            <input type="text" id="input-ukuran" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition" placeholder="Contoh: M, L, XL, 42">
                        </div>
                    </div>
                    <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition shadow-md mt-4 text-lg">
                        Simpan Barang
                    </button>
                </form>
            </div>
        </section>

        <!-- HALAMAN 2: TRANSAKSI -->
        <section id="page-transaksi" class="page-section hidden space-y-6">
            
            <!-- Step 1: Data Pelanggan -->
            <div id="step-pelanggan" class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                    <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                    Data Pelanggan
                </h2>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Nama Pelanggan</label>
                        <input type="text" id="trans-nama-pelanggan" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none" placeholder="Masukkan nama pelanggan">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Nomor WhatsApp</label>
                        <input type="tel" id="trans-no-wa" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none" placeholder="Contoh: 08123456789">
                    </div>
                    <button onclick="lanjutKePilihBarang()" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition shadow-md mt-2 text-lg">
                        Lanjut Pilih Barang &rarr;
                    </button>
                </div>
            </div>

            <!-- Step 2: Pilih Barang -->
            <div id="step-barang" class="hidden space-y-6">
                <!-- Pilihan Barang -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold text-gray-800">Pilih Barang</h2>
                        <button onclick="kembaliKePelanggan()" class="text-sm text-gray-500 hover:text-gray-700 underline">Ganti Pelanggan</button>
                    </div>

                    <div class="space-y-4 bg-blue-50/50 p-4 rounded-lg border border-blue-100">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Jenis Barang</label>
                            <div class="flex items-center gap-2">
                                <button onclick="ubahJenisDropdown(-1)" class="p-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 active:bg-gray-200 transition">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>
                                </button>
                                <select id="trans-jenis" onchange="syncNamaBerdasarkanJenis()" class="flex-grow px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white">
                                    <option value="">-- Pilih Jenis --</option>
                                </select>
                                <button onclick="ubahJenisDropdown(1)" class="p-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 active:bg-gray-200 transition">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                                </button>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Nama Barang</label>
                            <select id="trans-nama" onchange="syncJenisBerdasarkanNama()" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white">
                                <option value="">-- Pilih Barang --</option>
                            </select>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Harga (Otomatis)</label>
                                <div class="relative">
                                    <span class="absolute left-3 top-2 text-gray-500">Rp</span>
                                    <input type="text" id="trans-harga" readonly class="w-full pl-10 pr-4 py-2 bg-gray-100 border border-gray-300 rounded-lg text-gray-700 font-semibold cursor-not-allowed">
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Ukuran</label>
                                <select id="trans-ukuran" onchange="syncHargaBerdasarkanUkuran()" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white">
                                    <option value="">-</option>
                                </select>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Jumlah Pesanan</label>
                            <div class="flex items-center">
                                <button type="button" onclick="ubahJumlah(-1)" class="px-5 py-2 bg-gray-200 border border-gray-300 rounded-l-lg hover:bg-gray-300 active:bg-gray-400 font-bold text-gray-700 transition">-</button>
                                <input type="number" inputmode="numeric" id="trans-jumlah" value="1" min="1" readonly class="w-full py-2 border-y border-gray-300 outline-none text-center text-lg font-bold bg-white focus:ring-0">
                                <button type="button" onclick="ubahJumlah(1)" class="px-5 py-2 bg-gray-200 border border-gray-300 rounded-r-lg hover:bg-gray-300 active:bg-gray-400 font-bold text-gray-700 transition">+</button>
                            </div>
                        </div>

                        <button onclick="tambahkanKeKeranjang()" class="w-full bg-blue-100 hover:bg-blue-200 text-blue-800 font-bold py-3 px-4 rounded-lg transition border border-blue-300 flex justify-center items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                            Tambahkan Barang
                        </button>
                    </div>
                </div>

                <!-- Display Keranjang -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                    <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                        <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                        Display Pesanan
                    </h3>
                    <div class="overflow-x-auto rounded-lg border border-gray-200">
                        <table class="w-full text-sm text-left text-gray-600 responsive-table">
                            <thead class="text-xs text-gray-700 uppercase bg-gray-50 border-b border-gray-200">
                                <tr>
                                    <th scope="col" class="px-4 py-3">Nama Barang</th>
                                    <th scope="col" class="px-4 py-3 text-center">Ukuran</th>
                                    <th scope="col" class="px-4 py-3 text-right">Harga</th>
                                    <th scope="col" class="px-4 py-3 text-center">Jml</th>
                                    <th scope="col" class="px-4 py-3 text-right">Subtotal</th>
                                    <th scope="col" class="px-4 py-3 text-center">Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="tabel-keranjang-body">
                                <tr><td colspan="6" class="px-4 py-4 text-center text-gray-400 italic">Keranjang masih kosong</td></tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="mt-4 flex justify-between items-end border-t border-gray-200 pt-4">
                        <div>
                            <p class="text-sm text-gray-500">Total Item: <span id="total-item-keranjang" class="font-bold text-gray-800">0</span></p>
                        </div>
                        <div class="text-right">
                            <p class="text-sm text-gray-500">Total Tagihan:</p>
                            <p class="text-2xl font-bold text-blue-600">Rp <span id="total-harga-keranjang">0</span></p>
                        </div>
                    </div>

                    <button onclick="prosesBayar()" class="w-full mt-6 bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-4 rounded-lg transition shadow-lg flex justify-center items-center gap-2 text-lg">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                        Simpan Pesanan
                    </button>
                </div>
            </div>
        </section>

        <!-- HALAMAN 3: DATA PESANAN (STRUK) -->
        <section id="page-pesanan" class="page-section hidden">
            <!-- Pilihan Riwayat Pelanggan -->
            <div class="max-w-2xl mx-auto mb-6 no-print bg-white p-4 rounded-xl shadow-sm border border-gray-200 flex flex-col sm:flex-row items-center gap-4">
                <label class="font-medium text-gray-700 whitespace-nowrap">Riwayat Pesanan:</label>
                <select id="dropdown-riwayat" onchange="gantiRiwayat()" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                    <option value="">-- Belum ada riwayat --</option>
                </select>
            </div>

            <div id="area-struk" class="print-area bg-white p-8 rounded-xl shadow-md border border-gray-200 max-w-2xl mx-auto relative">
                
                <!-- Hiasan Pinggir Struk -->
                <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-500 to-green-500 rounded-t-xl no-print"></div>

                <div class="text-center mb-6">
                    <h2 class="text-3xl font-extrabold text-gray-800 uppercase tracking-wider">STRUK PESANAN</h2>
                    <p class="text-sm text-gray-500 mt-1" id="struk-tanggal">-</p>
                </div>

                <div class="mb-6 p-4 bg-gray-50 rounded-lg border border-gray-100">
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-2 text-sm">
                        <div class="text-gray-500 font-medium">Pelanggan</div>
                        <div class="sm:col-span-2 font-bold text-gray-800">: <span id="rekap-nama">-</span></div>
                        <div class="text-gray-500 font-medium">No. WhatsApp</div>
                        <div class="sm:col-span-2 font-bold text-gray-800">: <span id="rekap-wa">-</span></div>
                    </div>
                </div>

                <div class="border-t border-b border-dashed border-gray-300 py-4 mb-6">
                    <table class="w-full text-sm text-left responsive-table">
                        <thead>
                            <tr class="text-gray-500 border-b border-gray-200">
                                <th class="pb-2 font-medium">Barang & Ukuran</th>
                                <th class="pb-2 font-medium text-center">Jml</th>
                                <th class="pb-2 font-medium text-right">Subtotal</th>
                            </tr>
                        </thead>
                        <tbody id="tabel-rekap-body" class="text-gray-800">
                            <!-- Diisi oleh JS -->
                        </tbody>
                    </table>
                </div>

                <div class="flex justify-between items-center text-lg mb-8">
                    <div class="font-medium text-gray-600">Total Item: <span id="rekap-total-item" class="font-bold text-gray-800">0</span></div>
                    <div class="font-extrabold text-gray-800 text-xl">TOTAL: Rp <span id="rekap-total-harga">0</span></div>
                </div>

                <div class="text-center text-gray-500 text-sm italic mb-8">
                    Terima kasih telah berbelanja!
                </div>

                <!-- Tombol Aksi -->
                <div class="no-print grid grid-cols-1 md:grid-cols-2 gap-4 mt-8 border-t border-gray-100 pt-6">
                    <button onclick="kirimWhatsApp()" class="w-full bg-[#25D366] hover:bg-[#128C7E] text-white font-bold py-3 px-4 rounded-lg transition shadow flex justify-center items-center gap-2">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
                        Kirim ke WhatsApp
                    </button>
                    <button onclick="cetakStruk()" class="w-full bg-gray-800 hover:bg-gray-900 text-white font-bold py-3 px-4 rounded-lg transition shadow flex justify-center items-center gap-2">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path></svg>
                        Cetak Struk Fisik
                    </button>
                    <button onclick="editPesanan()" class="w-full bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-4 rounded-lg transition shadow flex justify-center items-center gap-2">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                        Ubah Pesanan
                    </button>
                    <button onclick="hapusPesanan()" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-4 rounded-lg transition shadow flex justify-center items-center gap-2">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                        Hapus Pesanan
                    </button>
                    <button onclick="resetSemua()" class="md:col-span-2 mt-2 w-full bg-blue-50 hover:bg-blue-100 text-blue-600 font-bold py-3 px-4 rounded-lg transition border border-blue-200 text-lg">
                        Buat Transaksi Baru
                    </button>
                </div>
            </div>
        </section>

<!-- HALAMAN 4: DASHBOARD -->
        <section id="page-dashboard" class="page-section hidden space-y-6">
            
            <!-- FILTER DASHBOARD (DIUBAH MENJADI MULTI-SELECT & AUTOCOMPLETE) -->
            <div class="bg-white p-4 rounded-xl shadow-sm grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 items-start no-print">
                
                <!-- 1. Filter Jenis Barang (Multi-Select Checkbox) -->
                <div class="relative">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Filter Jenis Barang</label>
                    <button type="button" onclick="toggleDropdown('dropdown-jenis-content')" class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-white text-left flex justify-between items-center focus:ring-2 focus:ring-blue-500">
                        <span id="label-jenis" class="truncate text-gray-600">Semua Jenis</span>
                        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <!-- Isi Dropdown (Checkbox) -->
                    <div id="dropdown-jenis-content" class="hidden absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto">
                        <div class="p-2 space-y-1" id="list-checkbox-jenis">
                            <!-- Diisi oleh JS -->
                        </div>
                    </div>
                </div>

                <!-- 2. Filter Ukuran (Multi-Select Checkbox) -->
                <div class="relative">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Filter Ukuran</label>
                    <button type="button" onclick="toggleDropdown('dropdown-ukuran-content')" class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-white text-left flex justify-between items-center focus:ring-2 focus:ring-blue-500">
                        <span id="label-ukuran" class="truncate text-gray-600">Semua Ukuran</span>
                        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <!-- Isi Dropdown (Checkbox) -->
                    <div id="dropdown-ukuran-content" class="hidden absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto">
                        <div class="p-2 space-y-1" id="list-checkbox-ukuran">
                            <!-- Diisi oleh JS -->
                        </div>
                    </div>
                </div>

                <!-- 3. Cari Nama Pelanggan (Autocomplete) -->
                <div class="relative">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Cari Nama Pelanggan</label>
                    <input type="text" id="filter-pelanggan" oninput="handleCustomerSearch(event)" onfocus="handleCustomerSearch(event)" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" placeholder="Ketik nama...">
                    <!-- Isi Saran Nama -->
                    <div id="autocomplete-pelanggan" class="hidden absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto">
                        <ul id="list-saran-pelanggan" class="text-sm">
                            <!-- Diisi oleh JS -->
                        </ul>
                    </div>
                </div>

                <!-- 4. Tombol Reset -->
                <div class="flex items-end h-full">
                    <button onclick="resetDashboardFilters()" class="w-full h-[42px] bg-red-50 hover:bg-red-100 text-red-600 border border-red-200 font-bold py-2 px-4 rounded-lg transition">Reset Filter</button>
                </div>
            </div>

            <!-- ... KARTU DATA NUMERIK DAN GRAFIK TETAP SAMA SEPERTI SEBELUMNYA ... -->
            <!-- Kartu Data Numerik -->
            <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 text-center">
                <div class="bg-blue-500 text-white p-4 rounded-xl shadow-lg">
                    <p class="text-sm opacity-80">Total Pendapatan</p>
                    <p id="db-total-pendapatan" class="text-xl sm:text-2xl font-bold">Rp 0</p>
                </div>
                <div class="bg-green-500 text-white p-4 rounded-xl shadow-lg">
                    <p class="text-sm opacity-80">Barang Terjual</p>
                    <p id="db-total-barang" class="text-xl sm:text-2xl font-bold">0</p>
                </div>
                <div class="bg-yellow-500 text-white p-4 rounded-xl shadow-lg">
                    <p class="text-sm opacity-80">Total Transaksi</p>
                    <p id="db-total-transaksi" class="text-xl sm:text-2xl font-bold">0</p>
                </div>
                <div class="bg-purple-500 text-white p-4 rounded-xl shadow-lg">
                    <p class="text-sm opacity-80">Produk Terlaris</p>
                    <p id="db-produk-terlaris" class="text-md sm:text-lg font-bold truncate">-</p>
                </div>
            </div>

            <!-- Grafik -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                    <h3 class="font-bold text-lg mb-4 text-center sm:text-left">Pendapatan Berdasarkan Jenis</h3>
                    <canvas id="chart-jenis-barang"></canvas>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                    <h3 class="font-bold text-lg mb-4 text-center sm:text-left">Top 5 Produk Terlaris</h3>
                    <canvas id="chart-top-produk"></canvas>
                </div>
            </div>
        </section>

    </main>

    <!-- Custom Toast Notification Container -->
    <div id="toast-container" class="fixed bottom-5 right-5 z-50 flex flex-col gap-2"></div>

    <!-- External JavaScript -->
    <script src="script.js"></script>
</body>
</html>
